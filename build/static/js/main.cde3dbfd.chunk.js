(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{74:function(e,t,c){},75:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(32),i=c.n(s),r=(c(74),c(12)),o=(c(75),c(106)),j=c(103),l=c(57),d=c.n(l),u=c(58),b=c.n(u),h=c(43),m=c.n(h),O=c(104),p=c(26),x=p.a.initializeApp({apiKey:"AIzaSyD1u5CWOyvD9x1--SBGEVfBFmUgTDWlsgw",authDomain:"whatsapp-clone-404a6.firebaseapp.com",projectId:"whatsapp-clone-404a6",storageBucket:"whatsapp-clone-404a6.appspot.com",messagingSenderId:"329626352053",appId:"1:329626352053:web:efafb5958f353deba4c1fc",measurementId:"G-G99YWHPSFP"}).firestore(),f=p.a.auth(),v=new p.a.auth.GoogleAuthProvider,g=x,S=c(31),N=c(3);var w=function(e){var t,c,n=e.id,s=e.name,i=e.AddnewChat,j=Object(a.useState)(""),l=Object(r.a)(j,2),d=l[0],u=l[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),m=h[0],O=h[1];return Object(a.useEffect)((function(){n&&g.collection("rooms").doc(n).collection("messages").orderBy("time","desc").onSnapshot((function(e){O(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(a.useEffect)((function(){u(Math.floor(1e4*Math.random()))}),[]),i?Object(N.jsx)("div",{className:"Sidebarchat",onClick:function(){var e=prompt("Please Enter name for the chat");e&&g.collection("rooms").add({name:e})},children:Object(N.jsx)("h2",{children:"Add New Chat"})}):Object(N.jsx)(S.b,{to:"/rooms/".concat(n),children:Object(N.jsxs)("div",{className:"Sidebarchat",children:[Object(N.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg"),onClick:function(){}}),Object(N.jsxs)("div",{className:"SideBarChatInfo",children:[Object(N.jsx)("h2",{children:s}),(null===(t=m[0])||void 0===t?void 0:t.message.startsWith("data:image"))?m[0].message="Image":Object(N.jsx)("p",{children:null===(c=m[0])||void 0===c?void 0:c.message})]})]})})},C=Object(a.createContext)(),y=function(e){var t=e.children,c=e.reducer,n=e.initialState;return Object(N.jsx)(C.Provider,{value:Object(a.useReducer)(c,n),children:t})},k=function(){return Object(a.useContext)(C)},I=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),i=Object(r.a)(s,2),l=i[0],u=i[1],h=k(),p=Object(r.a)(h,2),x=p[0].user;p[1];return Object(a.useEffect)((function(){g.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(N.jsxs)("div",{className:"sidebar ",children:[Object(N.jsxs)("div",{className:"sidebar-header",children:[Object(N.jsx)(o.a,{src:null===x||void 0===x?void 0:x.photoURL}),Object(N.jsxs)("div",{className:"sidebar_headerRight",children:[Object(N.jsx)(j.a,{children:Object(N.jsx)(d.a,{})}),Object(N.jsx)(j.a,{children:Object(N.jsx)(b.a,{})}),Object(N.jsx)(j.a,{children:Object(N.jsx)(m.a,{})})]})]}),Object(N.jsx)("div",{className:"sidebar_search",children:Object(N.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(N.jsx)(O.a,{}),Object(N.jsx)("input",{value:l,onChange:function(e){return u(e.target.value)},placeholder:"Search or Start New Chat"})]})}),Object(N.jsxs)("div",{className:"sidebar-chat",children:[Object(N.jsx)(w,{AddnewChat:!0}),l?c.filter((function(e){return e.data.name.toLowerCase().includes(l)})).map((function(e){return Object(N.jsx)(w,{id:e.id,name:e.data.name},e.id)})):c.map((function(e){return Object(N.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},A=c(62),D=c.n(A),E=c(61),W=c.n(E),T=c(63),F=c.n(T),P=c(64),R=c.n(P),B=c(11),L=c(59),M=c.n(L),U=c(48),_=c.n(U),G=c(60);var V=function(){var e=Object(B.f)().roomId,t=Object(a.useRef)(null),c=k(),n=Object(r.a)(c,2),s=n[0].user,i=(n[1],function(){var t=Object(G.a)(_.a.mark((function t(c){var a,n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=c.target.files[0]).name.match(/.(jpg|jpeg|png|gif)$/i)){t.next=5;break}alert("Only Image file allowed"),t.next=9;break;case 5:return t.next=7,o(a);case 7:n=t.sent,g.collection("rooms").doc(e).collection("messages").add({message:n,name:s.displayName,time:p.a.firestore.FieldValue.serverTimestamp()});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o=function(e){return new Promise((function(t,c){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){c(e)}}))};return Object(N.jsxs)("div",{className:"helo",children:[Object(N.jsx)("input",{ref:t,type:"file",accept:"image/*",onChange:i,style:{display:"none"}}),Object(N.jsxs)("div",{className:"menu",children:[Object(N.jsx)("button",{onClick:function(){t.current.click()},children:" Image "}),Object(N.jsx)("button",{children:" Document "}),Object(N.jsx)("button",{children:" Camera "}),Object(N.jsx)("button",{children:" Video "})]})]})};var z=function(){var e,t,c=Object(a.useState)(""),n=Object(r.a)(c,2),s=n[0],i=n[1],l=Object(a.useState)(""),d=Object(r.a)(l,2),u=d[0],b=d[1],h=Object(B.f)().roomId,O=Object(a.useState)(""),x=Object(r.a)(O,2),f=x[0],v=x[1],S=Object(a.useState)([]),w=Object(r.a)(S,2),C=w[0],y=w[1],I=k(),A=Object(r.a)(I,2),E=A[0].user,T=(A[1],Object(a.useState)(!1)),P=Object(r.a)(T,2),L=P[0],U=P[1],_=Object(a.useRef)(null),G=Object(a.useState)(!1),z=Object(r.a)(G,2),J=z[0],H=z[1];return Object(a.useEffect)((function(){h&&(g.collection("rooms").doc(h).onSnapshot((function(e){return v(e.data().name)})),g.collection("rooms").doc(h).collection("messages").orderBy("time","asc").onSnapshot((function(e){return y(e.docs.map((function(e){return e.data()})))})))}),[h]),Object(a.useEffect)((function(){i(Math.floor(1e4*Math.random()))}),[h]),Object(a.useEffect)((function(){!function(){var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[C]),Object(N.jsxs)("div",{className:"chat",children:[Object(N.jsxs)("div",{className:"chat-header",children:[Object(N.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(s,".svg")}),Object(N.jsxs)("div",{className:"chat-headerInfo",children:[Object(N.jsx)("h3",{children:f}),Object(N.jsxs)("p",{children:["Last Seena at ",new Date(null===(e=C[C.length-1])||void 0===e||null===(t=e.time)||void 0===t?void 0:t.toDate()).toUTCString()," "]})]}),Object(N.jsxs)("div",{className:"chat-headerRight",children:[Object(N.jsx)(j.a,{children:Object(N.jsx)(W.a,{})}),Object(N.jsx)(j.a,{children:Object(N.jsx)(D.a,{onClick:function(){H(!J)}})}),J?Object(N.jsx)(V,{}):null,Object(N.jsx)(j.a,{children:Object(N.jsx)(m.a,{})})]})]}),Object(N.jsxs)("div",{className:"chat-body",children:[C.map((function(e){var t;return Object(N.jsxs)("p",{className:"chat-message ".concat(e.name===E.displayName&&"chat-receiver"),children:[Object(N.jsx)("span",{className:"chat-name",children:e.name}),e.message.startsWith("data:image")?Object(N.jsx)("div",{className:"chat-pic",children:Object(N.jsx)("img",{src:e.message})}):e.message,Object(N.jsx)("span",{className:"chat-time",children:new Date(null===(t=e.time)||void 0===t?void 0:t.toDate()).toUTCString()})]})})),Object(N.jsx)("div",{ref:_,children:L&&Object(N.jsx)(M.a,{onEmojiClick:function(e,t){b(u+t.emoji)}})})]}),Object(N.jsxs)("div",{className:"chat-footer",children:[Object(N.jsx)(j.a,{children:Object(N.jsx)(F.a,{onClick:function(){U(!L)}})}),Object(N.jsxs)("form",{children:[Object(N.jsx)("input",{type:"text",placeholder:"Type a Message",value:u,onChange:function(e){return b(e.target.value)}}),Object(N.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),b(""),g.collection("rooms").doc(h).collection("messages").add({message:u,name:E.displayName,time:p.a.firestore.FieldValue.serverTimestamp()})},children:"Send"})]}),Object(N.jsx)(R.a,{})]})]})};var J=function(){return Object(N.jsx)("div",{className:"chat",children:Object(N.jsxs)("div",{className:"default-body",children:[Object(N.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/150px-WhatsApp.svg.png"}),Object(N.jsx)("div",{className:"Text",children:Object(N.jsx)("h1",{children:"Sign into to Whatsapp"})})]})})},H=c(65),K=c(49),Y="SET_USER",$=function(e,t){switch(console.log(t),t.type){case Y:return Object(K.a)(Object(K.a)({},e),{},{user:t.user});default:return e}},q=c(105);var Q=function(){var e=k(),t=Object(r.a)(e,2);Object(H.a)(t[0]);var c=t[1];return Object(N.jsx)("div",{className:"login",children:Object(N.jsxs)("div",{className:"login-container",children:[Object(N.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/150px-WhatsApp.svg.png",alt:""}),Object(N.jsx)("div",{className:"login-next",children:Object(N.jsx)("h1",{children:"Sign into to Whatsapp"})}),Object(N.jsx)(q.a,{onClick:function(){f.signInWithPopup(v).then((function(e){c({type:Y,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In with Google"})]})})};var X=function(){var e=k(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(N.jsx)("div",{className:"App",children:c?Object(N.jsx)("div",{className:"app__body",children:Object(N.jsxs)(S.a,{children:[Object(N.jsx)(I,{}),Object(N.jsxs)(B.c,{children:[Object(N.jsx)(B.a,{path:"/rooms/:roomId",children:Object(N.jsx)(z,{})}),Object(N.jsx)(B.a,{path:"/",children:Object(N.jsx)(J,{})})]})]})}):Object(N.jsx)(Q,{})})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,107)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))};i.a.render(Object(N.jsx)(n.a.StrictMode,{children:Object(N.jsx)(y,{initialState:{user:null},reducer:$,children:Object(N.jsx)(X,{})})}),document.getElementById("root")),Z()}},[[86,1,2]]]);
//# sourceMappingURL=main.cde3dbfd.chunk.js.map